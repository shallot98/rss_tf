# 内联键盘使用指南

## 什么是内联键盘？

内联键盘是 Telegram 机器人提供的一种交互式界面，通过点击按钮来执行操作，无需输入复杂的命令。

## 快速开始

### 1. 查看所有RSS源

发送命令：
```
/listsources
```

你会看到：
```
📡 RSS源列表

点击下方按钮管理对应RSS源的关键词：

┌──────────────────────────┐
│ 📡 NodeSeek (3个关键词)  │
│ 📡 HostLoc (2个关键词)   │
└──────────────────────────┘
```

### 2. 查看源详情

点击任意一个源按钮，例如 **[📡 NodeSeek (3个关键词)]**

你会看到：
```
📡 NodeSeek
ID: nodeseek
URL: https://rss.nodeseek.com/

关键词列表：
1. VPS
2. 优惠
3. 服务器

💡 管理提示：
• 添加关键词: /add nodeseek <关键词>
• 删除关键词: /del nodeseek <序号或关键词>

┌─────────────────┐
│ ❌ 删除: VPS    │
│ ❌ 删除: 优惠   │
│ ❌ 删除: 服务器 │
│ 🔙 返回源列表   │
└─────────────────┘
```

### 3. 删除关键词

点击任意一个删除按钮，例如 **[❌ 删除: VPS]**

- 关键词会被立即删除
- 页面自动刷新显示最新状态
- 顶部显示确认消息：✓ 已删除关键词: VPS

### 4. 返回源列表

点击 **[🔙 返回源列表]** 按钮

- 返回到RSS源列表页面
- 可以继续管理其他源

## 常见操作

### 添加关键词

内联键盘目前不支持添加关键词（需要文本输入），请使用命令：

```
/add nodeseek VPS
```

### 查看帮助

```
/help
```

### 添加新的RSS源

```
/addsource https://rss.example.com/ ExampleSite
```

### 删除RSS源

```
/delsource nodeseek
```

## 使用场景示例

### 场景1: 快速清理不需要的关键词

```
1. /listsources
2. 点击要管理的源
3. 逐个点击删除按钮
4. 完成后返回源列表
```

### 场景2: 检查所有源的关键词配置

```
1. /listsources
2. 依次点击各个源查看
3. 使用返回按钮在源之间切换
```

### 场景3: 为新源配置关键词

```
1. /addsource <url> <name>  (添加新源)
2. /add <name> 关键词1       (添加关键词)
3. /add <name> 关键词2       (添加更多关键词)
4. /listsources              (用内联键盘查看确认)
```

## 提示和技巧

### 📱 移动端使用

- 按钮大小适合手指点击
- 无需切换到键盘输入
- 滚动查看长列表

### 🎯 精准操作

- 每个按钮对应一个明确的操作
- 删除按钮显示具体的关键词名称
- 不会误删其他内容

### ⚡ 快速导航

- 使用返回按钮在页面间切换
- 消息原地更新，不会产生大量消息
- 保持对话整洁

### 🔄 实时更新

- 删除关键词后立即看到结果
- 关键词数量自动更新
- 无需刷新或重新查询

## 混合使用命令和按钮

你可以灵活组合使用命令和内联键盘：

| 操作 | 推荐方式 | 原因 |
|------|----------|------|
| 浏览源列表 | 内联键盘 | 可视化，一目了然 |
| 查看关键词 | 内联键盘 | 格式化显示，易读 |
| 删除关键词 | 内联键盘 | 点击即删，快捷 |
| 添加关键词 | 命令 | 需要输入文本 |
| 添加RSS源 | 命令 | 需要输入URL和名称 |
| 批量操作 | 命令 | 可以脚本化 |

## 常见问题

### Q: 为什么没有添加关键词的按钮？

A: 添加关键词需要输入文本，目前使用命令更方便：
```
/add <源名称> <关键词>
```

未来可能会添加内联输入功能。

### Q: 删除按钮点击后没反应？

A: 可能的原因：
1. 网络延迟 - 等待几秒
2. 机器人离线 - 检查监控程序状态
3. 配置文件问题 - 查看日志文件

### Q: 按钮显示的关键词数不正确？

A: 可能是配置文件未正确保存。尝试：
1. 重新发送 /listsources
2. 检查 data/config.json 文件
3. 重启监控程序

### Q: 能否批量删除关键词？

A: 目前每次只能删除一个关键词。如需批量删除，可以：
1. 连续点击多个删除按钮
2. 或使用命令逐个删除
3. 或直接编辑配置文件（需要重启）

### Q: 误删了关键词怎么办？

A: 使用添加命令重新添加：
```
/add <源名称> <关键词>
```

建议定期备份 data/config.json 文件。

## 键盘快捷键

虽然这是内联键盘，但你仍可以使用 Telegram 的一些快捷操作：

- **长按消息** - 查看消息详情
- **向上滑动** - 查看历史消息
- **点击时间** - 跳转到该消息的时间线位置

## 技术限制

### Telegram API 限制

1. **callback_data 长度**
   - 最大 64 字节
   - 超长的源ID可能被截断
   - 建议使用简短的源ID

2. **按钮数量**
   - 理论上没有限制
   - 但过多按钮会影响用户体验
   - 建议每个源的关键词不超过 20 个

3. **消息编辑**
   - 只能编辑最近的消息
   - 太旧的消息无法编辑
   - 此时会发送新消息

### 建议的最佳实践

- 保持源ID简短（10字符以内）
- 每个源的关键词控制在 15 个以内
- 定期清理不需要的关键词
- 使用有意义的源名称

## 故障排除

### 按钮不响应

1. 检查网络连接
2. 查看机器人是否在线
3. 重启监控程序
4. 查看日志文件 data/monitor.log

### 显示错误

1. 源不存在 - 使用 /listsources 确认源名
2. 索引越界 - 可能配置文件损坏，尝试重启
3. 网络超时 - 检查网络连接

### 配置不同步

1. 重新加载配置：重启监控程序
2. 检查文件权限：确保可以写入 data/config.json
3. 查看备份文件：data/config.json.bak

## 进阶技巧

### 自定义源ID

添加源时使用简短的ID：
```
/addsource https://rss.nodeseek.com/ NS
```
这样生成的ID是 `ns`，在内联键盘中使用更简洁。

### 组织关键词

为不同类型的内容使用不同的源：
```
NodeSeek-优惠 -> 只包含优惠相关关键词
NodeSeek-技术 -> 只包含技术相关关键词
```

### 定期维护

建议每周：
1. 使用内联键盘浏览所有源
2. 清理不再需要的关键词
3. 添加新的关键词
4. 检查通知效果

## 反馈和建议

如果你有任何建议或发现问题，欢迎反馈：

- 功能建议
- 用户体验改进
- 界面优化
- 新功能需求

---

## 总结

内联键盘让 RSS 监控程序的管理变得更加直观和便捷。结合传统命令使用，可以实现高效的源和关键词管理。

**记住三个关键操作：**

1. 📡 `/listsources` - 查看所有源
2. 👆 点击源按钮 - 查看详情
3. ❌ 点击删除按钮 - 删除关键词

享受更好的管理体验！🎉
