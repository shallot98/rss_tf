# 按钮式管理指南

## 概述

RSS监控机器人现在支持完全通过Telegram按钮来管理RSS源和关键词，无需使用命令行或复杂的命令语法。

## 快速开始

### 打开管理面板

发送以下任一命令即可打开管理面板：
- `/manage`
- `/listsources`
- `/start`
- `/help`

## 功能说明

### 1. RSS源管理

#### 查看所有RSS源
- 发送 `/manage` 打开管理面板
- 所有RSS源会显示为按钮，显示源名称和关键词数量
- 点击任意源按钮进入该源的详情页

#### 添加新RSS源
1. 在管理面板点击 **➕ 添加新RSS源** 按钮
2. 发送RSS源的URL（例如：`https://rss.nodeseek.com/`）
3. 发送RSS源的名称（例如：`NodeSeek`）
4. 系统自动创建新源并进入详情页

**特点：**
- URL格式自动验证（必须以http://或https://开头）
- 自动检测重复源名称
- 可随时点击"取消"按钮中止操作

#### 删除RSS源
1. 在源详情页点击 **🗑️ 删除此源** 按钮
2. 系统显示确认对话框
3. 点击 **✅ 确认删除** 完成删除，或点击 **❌ 取消** 返回

### 2. 关键词管理

#### 查看关键词列表
- 在管理面板点击任意RSS源按钮
- 显示该源的所有关键词
- 如果没有关键词会显示"(暂无关键词)"

#### 添加关键词
1. 进入RSS源详情页
2. 点击 **➕ 添加关键词** 按钮
3. 直接发送要添加的关键词文本
4. 系统自动添加并刷新列表

**特点：**
- 自动检测重复关键词
- 关键词不能为空
- 可随时点击"取消"按钮中止操作

#### 删除关键词
- 在源详情页，每个关键词都有对应的 **❌ 删除: [关键词]** 按钮
- 点击即可直接删除，无需确认

### 3. 导航

- **🔙 返回源列表**：从源详情页返回到管理面板
- 所有操作完成后，界面会自动更新显示最新状态

## 与命令行模式的对比

### 按钮模式（推荐）
✅ 直观易用，无需记忆命令  
✅ 自动验证输入  
✅ 实时反馈操作结果  
✅ 支持取消操作  
✅ 一目了然的界面布局  

### 命令行模式（备用）
⚠️ 需要记忆命令语法  
⚠️ 容易输入错误  
⚠️ 不支持取消操作  
✅ 适合批量操作或脚本调用  

## 命令行模式（备用）

如果你更喜欢使用命令行，以下命令仍然可用：

### RSS源管理
```
/addsource <url> <name>     # 添加RSS源
/delsource <序号或名称>      # 删除RSS源
/listsources               # 列出所有RSS源（带按钮）
```

### 关键词管理
```
/add <source_name> <keyword>        # 添加关键词
/del <source_name> <序号或关键词>    # 删除关键词
/list <source_name>                 # 列出指定源的关键词
/list                               # 列出所有源的关键词
```

## 使用示例

### 示例1：从零开始添加RSS源和关键词

1. 发送 `/manage`
2. 点击 **➕ 添加新RSS源**
3. 发送 `https://rss.example.com/`
4. 发送 `示例RSS`
5. 点击 **➕ 添加关键词**
6. 发送 `促销`
7. 再次点击 **➕ 添加关键词**
8. 发送 `优惠`
9. 完成！现在机器人会监控包含"促销"或"优惠"的文章

### 示例2：管理现有RSS源

1. 发送 `/manage`
2. 点击要管理的RSS源按钮
3. 查看当前关键词列表
4. 点击 **❌ 删除: [关键词]** 删除不需要的关键词
5. 点击 **➕ 添加关键词** 添加新关键词
6. 点击 **🔙 返回源列表** 返回

### 示例3：删除RSS源

1. 发送 `/manage`
2. 点击要删除的RSS源按钮
3. 点击 **🗑️ 删除此源**
4. 点击 **✅ 确认删除**
5. 源及其所有关键词被删除

## 技术细节

### 用户状态管理
- 系统会记住你当前的操作状态
- 支持多用户同时操作（每个用户状态独立）
- 状态会持久化到配置文件中

### 消息编辑
- 大部分操作会编辑原消息，而不是发送新消息
- 减少聊天记录的混乱
- 保持界面整洁

### 错误处理
- 所有输入都会进行验证
- 错误提示清晰明了
- 支持重试和取消操作

## 注意事项

1. **操作会立即保存**：所有添加和删除操作都会立即写入配置文件
2. **删除不可恢复**：删除RSS源或关键词后无法撤销
3. **并发安全**：支持多个用户同时操作，不会互相干扰
4. **状态超时**：用户状态会持久化，但建议尽快完成操作

## 常见问题

**Q: 我可以同时添加多个关键词吗？**  
A: 可以。添加一个关键词后，可以立即点击"➕ 添加关键词"按钮继续添加。

**Q: 如果我输入错误了怎么办？**  
A: 点击"❌ 取消"按钮可以中止当前操作，然后重新开始。

**Q: 命令行模式还能用吗？**  
A: 可以。所有命令行命令仍然保留，可以根据你的喜好选择使用。

**Q: 按钮操作会影响正在运行的监控吗？**  
A: 不会。监控程序会自动重新加载配置，新的设置会在下次检查时生效。

**Q: 我可以在PC端和手机端同时管理吗？**  
A: 可以。状态是按用户ID保存的，在不同设备上使用同一个Telegram账号不会冲突。

## 总结

按钮式管理让RSS源和关键词的管理变得前所未有的简单。只需点击几下按钮，就能完成所有配置操作。强烈推荐使用！

开始使用：发送 `/manage` 到机器人 🚀
